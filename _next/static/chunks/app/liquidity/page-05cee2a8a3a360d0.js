(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[217],{3812:(e,t,a)=>{Promise.resolve().then(a.bind(a,4719))},4719:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var l=a(5155),n=a(2115),r=a(6911);let i=e=>{let{isOpen:t,onClose:a,children:n,className:r}=e;return t?(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-sm ".concat(r),children:[(0,l.jsx)("button",{onClick:a,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800",children:"✕"}),n]})}):null};var s=a(5631),c=a(8808),o=a(2316),d=a(2276),u=a(4570),g=a(9659),m=a(9092);let h=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),x=()=>{let{walletConnected:e,walletAddress:t,connectWallet:a}=(0,m.v)(),x="0xE314913f34Ddb810142Acca1Acd3C96603e42468",f="0x5BAAA2054Bba4A1FEAf52aFb8502B14c61A8Bed9",b="0x46caFcED9C1E16F05b474774144f325A16d9B26E",[w,y]=(0,n.useState)(!1),[v,j]=(0,n.useState)(!1),[p,N]=(0,n.useState)(""),[k,C]=(0,n.useState)(""),[A,E]=(0,n.useState)(""),[S,q]=(0,n.useState)(!1),[L,B]=(0,n.useState)(!1),F=(e,t)=>{let a=e===b?u.HV:e===f?g.HV:d.HV;return new s.NZ(e,a,t)},I=async e=>{let t=window.ethereum,a=new c.k(t),l=F(e,await a.getSigner());try{return await l.decimals()}catch(t){throw console.error("Error fetching decimals for ".concat(e,":"),t),Error("Failed to get decimals for token ".concat(e))}},O=async(e,t,a)=>{console.log("begin to apporve");let l=window.ethereum,n=new c.k(l),r=F(t,await n.getSigner());try{let l=await r.allowance(e,a);if(console.log("".concat(t," 授权额度: ").concat(l.toString())),BigInt(l)===BigInt(0)){console.log("".concat(t," 授权不足，开始授权..."));let e=await r.approve(a,h);console.log("授权交易已提交，等待确认...",e.hash),await e.wait(),console.log("".concat(t," 授权成功"))}}catch(e){throw console.error("Error ensuring approval for ".concat(t,":"),e),Error("Failed to ensure approval for ".concat(t))}},P=async()=>{if(!e||!t){alert("Please connect your wallet first.");return}try{q(!0);let e=await I(f),a=await I(b);console.log("usdcDecimals, erc20Decimals ",e,a);let l=window.ethereum,n=new c.k(l),r=await n.getSigner(),i=F(f,r),u=F(b,r),g=await i.balanceOf(t),m=await u.balanceOf(t),h=o.XS(p,e),w=o.XS(k,a);if(g<h||m<w){alert("Insufficient token balance to add liquidity."),q(!1);return}console.log("开始授权"),await O(t,f,x),await O(t,b,x),console.log("授权完成");let v=new s.NZ(x,d.HV,r),j=await v.addLiquidity(h,w);await j.wait(),q(!1),alert("Liquidity added successfully!"),N(""),C(""),y(!1)}catch(e){console.error("Error adding liquidity:",e),q(!1),alert("Failed to add liquidity. Please try again.")}},_=async()=>{if(!e||!t){alert("Please connect your wallet first.");return}try{B(!0);let e=window.ethereum,a=new c.k(e),l=await a.getSigner(),n=new s.NZ(x,d.HV,l),r=await n.balanceOf(t),i=o.XS(A,18);if(BigInt(r)<BigInt(i)){alert("Insufficient LP token balance."),B(!1);return}let u=await n.removeLiquidity(i);await u.wait(),alert("Liquidity removed successfully!"),B(!1),E(""),j(!1)}catch(e){console.error("Error removing liquidity:",e),B(!1),alert("Failed to remove liquidity. Please try again.")}};return(0,l.jsx)("div",{className:"min-h-screen bg-blue-50 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6 w-full max-w-md",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-800 text-center mb-6",children:"Manage Liquidity"}),e?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(r.A,{onClick:()=>y(!0),className:"w-full bg-green-500 hover:bg-green-600",children:"Add Liquidity"}),(0,l.jsx)(r.A,{onClick:()=>j(!0),className:"w-full bg-red-500 hover:bg-red-600",children:"Remove Liquidity"})]})}):(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"Wallet not connected. Please connect your wallet to continue."}),(0,l.jsx)(r.A,{onClick:a,className:"w-full bg-blue-500 hover:bg-blue-600 text-white",children:"Connect Wallet"})]}),(0,l.jsxs)(i,{isOpen:w,onClose:()=>y(!1),children:[(0,l.jsx)("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:"Add Liquidity"}),(0,l.jsxs)("form",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Mock USDC Amount"}),(0,l.jsx)("input",{type:"number",className:"w-full p-2 mt-2 border rounded-lg focus:outline-none focus:ring focus:ring-green-500",placeholder:"Enter amount",value:p,onChange:e=>N(e.target.value)}),(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-600 mt-4",children:"Mock ERC20 Amount"}),(0,l.jsx)("input",{type:"number",className:"w-full p-2 mt-2 border rounded-lg focus:outline-none focus:ring focus:ring-green-500",placeholder:"Enter amount",value:k,onChange:e=>C(e.target.value)}),(0,l.jsxs)("div",{className:"flex justify-end space-x-4 mt-6",children:[(0,l.jsx)(r.A,{onClick:()=>y(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-800",disabled:S,children:"Cancel"}),(0,l.jsx)(r.A,{onClick:P,className:"bg-green-500 hover:bg-green-600",disabled:S,children:"Confirm"})]})]})]}),(0,l.jsxs)(i,{isOpen:v,onClose:()=>j(!1),children:[(0,l.jsx)("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:"Remove Liquidity"}),(0,l.jsxs)("form",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Liquidity Amount"}),(0,l.jsx)("input",{type:"number",className:"w-full p-2 mt-2 border rounded-lg focus:outline-none focus:ring focus:ring-red-500",placeholder:"Enter amount",value:A,onChange:e=>E(e.target.value)}),(0,l.jsxs)("div",{className:"flex justify-end space-x-4 mt-6",children:[(0,l.jsx)(r.A,{onClick:()=>j(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-800",disabled:L,children:"Cancel"}),(0,l.jsx)(r.A,{onClick:_,className:"bg-red-500 hover:bg-red-600",disabled:L,children:"Confirm"})]})]})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[733,824,441,517,358],()=>t(3812)),_N_E=e.O()}]);